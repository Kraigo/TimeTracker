<div class="container">

    <div class="page-header">
        <h2>Teams</h2>
    </div>

    <div class="alert alert-info" role="alert" *ngFor="let invitation of invitations">
        You has been invited to team <b>{{invitation.team}}</b>
        <div class="pull-right" style="margin-top: -6px">
            <button class="btn btn-default btn-xs" (click)="acceptInvitation(invitation)">Accept</button>
            <button class="btn btn-danger btn-xs" (click)="refuseInvitation(invitation)">Refuse</button>
        </div>
    </div>


    <div class="input-group">
        <input type="text" class="form-control" placeholder="New Team Title" [(ngModel)]="newTeamTitle">
        <span class="input-group-btn">
            <button class="btn btn-default" type="button" (click)="addTeam()">Add Team</button>
        </span>
    </div>
    <br>

    <div class="panel panel-default" *ngFor="let team of teams">
        <div class="panel-heading">
            Team: <b>{{team.title}}</b>
            <span class="pull-right label label-info" *ngIf="team.isOwner">Owner</span>
        </div>

        <div class="panel-body">
            <button class="btn btn-primary btn-xs" (click)="openProjects(team)">Projects</button>
            <button class="btn btn-primary btn-xs" (click)="openCategories(team)">Categories</button>
            <button class="btn btn-primary btn-xs" (click)="openMembers(team)">Members</button>
            <button class="btn btn-danger btn-xs" (click)="removeTeam(team)" *ngIf="team.isOwner">Remove</button>

            <hr>
            
            <h5>Activity over the last 24 hours</h5>
            <tt-team-activity [team]="team"></tt-team-activity>   
        </div>

    </div>
</div>


<tt-projects-modal #projectsModal="modal" [team]="selectedTeam"></tt-projects-modal>
<tt-categories-modal #categoriesModal="modal" [team]="selectedTeam"></tt-categories-modal>
<tt-members-modal #membersModal="modal" [team]="selectedTeam"></tt-members-modal>